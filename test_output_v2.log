FAIL src/__tests__/evaluation/overfittingDetector.test.ts
  detectOverfitting
    ‚àö should detect no overfitting when scores are similar (3 ms)
    ‚àö should detect mild overfitting
    ‚àö should detect moderate overfitting
    ‚àö should detect severe overfitting (1 ms)
    ‚àö should respect custom threshold (1 ms)
    ‚àö should analyze complexity correctly (1 ms)
    ‚àö should include recommendations (1 ms)
  kFoldCrossValidation
    ‚àö should perform 5-fold validation (3 ms)
    ‚àö should identify best and worst folds (1 ms)
    ‚àö should determine stability correctly (1 ms)
    ‚àö should throw error if k < 2 (21 ms)
    ‚àö should throw error if not enough test cases
  splitDataset
    ‚àö should split dataset with default ratios
    ‚àö should split with custom ratios
    ‚àö should not have overlapping samples (1 ms)
  heldOutValidation
    ‚àö should return scores for all three sets (2 ms)
    ‚àö should calculate generalization score correctly (1 ms)
  analyzeDiversity
    ‚àö should calculate diversity for uniform distribution
    ‚àö should calculate low diversity for skewed distribution
    ‚àö should identify sufficient diversity (2 ms)
    ‚àö should handle uncategorized data (1 ms)
  calculateRegularization
    ‚àö should penalize longer prompts more
    ‚àö should respect lambda parameter
    ‚àö should return positive penalty
  simplifyPrompt
    ‚àö should reduce prompt length
    √ó should remove examples (1 ms)
    ‚àö should remove explanations (1 ms)
    ‚àö should respect target reduction
    ‚àö should preserve at least minimum lines
  comprehensiveOverfittingAnalysis
    ‚àö should return all analysis components (2 ms)
    √ó should generate simplified prompt for complex prompts (1 ms)
    ‚àö should not generate simplified prompt for simple prompts (1 ms)
  Integration Tests
    √ó complete workflow: detect and fix overfitting (2 ms)

  ‚óè simplifyPrompt ‚Ä∫ should remove examples

    expect(received).not.toContain(expected) // indexOf

    Expected substring: not "Example:"
    Received string:        "Write a function.
    Example: function add(a, b) { return a + b; }
    Make it efficient."

    [0m [90m 397 |[39m         [36mconst[39m simplified [33m=[39m simplifyPrompt(prompt)[33m;[39m
     [90m 398 |[39m
    [31m[1m>[22m[39m[90m 399 |[39m         expect(simplified)[33m.[39mnot[33m.[39mtoContain([32m'Example:'[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 400 |[39m     })[33m;[39m
     [90m 401 |[39m
     [90m 402 |[39m     test([32m'should remove explanations'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/evaluation/overfittingDetector.test.ts:399:32)

  ‚óè comprehensiveOverfittingAnalysis ‚Ä∫ should generate simplified prompt for complex prompts

    expect(received).toBeLessThan(expected)

    Expected: < 5000
    Received:   5000

    [0m [90m 470 |[39m
     [90m 471 |[39m         expect(analysis[33m.[39msimplifiedPrompt)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m>[22m[39m[90m 472 |[39m         expect(analysis[33m.[39msimplifiedPrompt[33m![39m[33m.[39mlength)[33m.[39mtoBeLessThan(complexPrompt[33m.[39mlength)[33m;[39m
     [90m     |[39m                                                   [31m[1m^[22m[39m
     [90m 473 |[39m     })[33m;[39m
     [90m 474 |[39m
     [90m 475 |[39m     test([32m'should not generate simplified prompt for simple prompts'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at src/__tests__/evaluation/overfittingDetector.test.ts:472:51
      at step (src/__tests__/evaluation/overfittingDetector.test.ts:48:23)
      at Object.next (src/__tests__/evaluation/overfittingDetector.test.ts:29:53)
      at fulfilled (src/__tests__/evaluation/overfittingDetector.test.ts:20:58)

  ‚óè Integration Tests ‚Ä∫ complete workflow: detect and fix overfitting

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 519 |[39m
     [90m 520 |[39m         [90m// 5. Verify overfitting detected[39m
    [31m[1m>[22m[39m[90m 521 |[39m         expect(analysis[33m.[39moverfittingReport[33m.[39misOverfit)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                                      [31m[1m^[22m[39m
     [90m 522 |[39m         expect(analysis[33m.[39moverfittingReport[33m.[39mseverity)[33m.[39mnot[33m.[39mtoBe([32m'none'[39m)[33m;[39m
     [90m 523 |[39m
     [90m 524 |[39m         [90m// 6. Verify simplified prompt generated[39m[0m

      at src/__tests__/evaluation/overfittingDetector.test.ts:521:54
      at step (src/__tests__/evaluation/overfittingDetector.test.ts:48:23)
      at Object.next (src/__tests__/evaluation/overfittingDetector.test.ts:29:53)
      at fulfilled (src/__tests__/evaluation/overfittingDetector.test.ts:20:58)

Test Suites: 1 failed, 1 total
Tests:       3 failed, 30 passed, 33 total
Snapshots:   0 total
Time:        0.552 s, estimated 1 s
Ran all test suites matching src/__tests__/evaluation/overfittingDetector.test.ts.
