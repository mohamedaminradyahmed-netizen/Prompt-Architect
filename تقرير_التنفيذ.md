# ุชูุฑูุฑ ูุทุงุจูุฉ ุงูุชูููุฐ - Prompt Refiner

**ุชุงุฑูุฎ ุงูุชูุฑูุฑ**: 2025-12-14
**ุญุงูุฉ ุงููุดุฑูุน**: MVP ููุชูู ุฌุฒุฆูุงู (ุงููุฑุญูุฉ 1)

---

## ๐ ููุฎุต ุชูููุฐู

| ุงููููุงุณ | ุงูุนุฏุฏ | ุงููุณุจุฉ |
|---------|-------|--------|
| **ุฅุฌูุงูู ุงูููุงู ูู TODO.md** | ~120 ูููุฉ | 100% |
| **ุงูููุงู ุงูููุฌุฒุฉ** | 8 ููุงู | ~7% |
| **ุงูููุงู ููุฏ ุงูุชูููุฐ** | 0 ูููุฉ | 0% |
| **ุงูููุงู ุงููุชุจููุฉ** | ~112 ูููุฉ | ~93% |

---

## โ ุงูููุงู ุงูููุฌุฒุฉ (ูุง ุชู ุชูููุฐู)

### ุงูุฑูู 2.1: ููููุฏ ุงูุชุนุฏููุงุช (Mutation Generator)

#### โ ุงูููุฌุฒ:

1. **ุชุทููุฑ ูุธุงู ุฅุนุงุฏุฉ ุงููุชุงุจุฉ ุงูุชุนูููุงุชูุฉ** (ุฌุฒุฆูุงู)
   - โ `paraphrase` - ุฅุนุงุฏุฉ ุตูุงุบุฉ ุจุณูุทุฉ ุจุงุณุชุจุฏุงู ุงููุฑุงุฏูุงุช
   - ุงูููู: [mutations.ts:31-55](mutations.ts#L31-L55)
   - ุงููุธููุฉ: `paraphraseMutation()`

2. **ุชุทููุฑ ููุงุนุฏ ุจุณูุทุฉ ูุงุฎุชุตุงุฑ** (ุฌุฒุฆูุงู)
   - โ `shorten` - ุฅุฒุงูุฉ ูููุงุช ุงูุญุดู ูุงููุณุงูุงุช ุงูุฒุงุฆุฏุฉ
   - ุงูููู: [mutations.ts:57-75](mutations.ts#L57-L75)
   - ุงููุธููุฉ: `shortenMutation()`

3. **ุชุทููุฑ ูุธุงู ุฅุถุงูุฉ ุงููููุฏ** (ุฌุฒุฆูุงู)
   - โ `add constraint` - ุฅุถุงูุฉ ุชุนูููุงุช ูููููุฉ
   - ุงูููู: [mutations.ts:77-103](mutations.ts#L77-L103)
   - ุงููุธููุฉ: `addConstraintMutation()`

#### โ ุบูุฑ ููุฌุฒ:

- โ ุชุทููุฑ ููุงุนุฏ ุชุญููู ุฃุณุงููุจ `try/catch`
- โ ุชุทููุฑ ููุงุนุฏ ุชูููู ุงูู`context`
- โ ุจูุงุก ููุงูุจ ููููููุฉ (`parameterized templates`)
- โ ูุธุงู `expand` ููุฅุนุงุฏุฉ ุงููุชุงุจุฉ
- โ ูุธุงู `constrain` ููุฅุนุงุฏุฉ ุงููุชุงุจุฉ
- โ ุชุทููุฑ ุงุณุชุฑุงุชูุฌูุงุช ุชูุณูู ุงูููุงู ูููุงู ูุฑุนูุฉ
- โ ุชุทููุฑ ูุธุงู `multi-step prompts`

---

### ุงูุฑูู 2.2: ูููููู ุงูุฌูุงุฆุฒ (Reward/Scoring Model)

#### โ ุงูููุฌุฒ:

4. **ุจูุงุก ููุงููุณ ุณุทุญูุฉ** (ุฌุฒุฆูุงู)
   - โ `token cost` - ุญุณุงุจ ุชูุฑูุจู ููุชูููุงุช
   - ุงูููู: [evaluator.ts:10-17](evaluator.ts#L10-L17)
   - ุงููุธููุฉ: `calculateTokenCount()`

5. **ุญุณุงุจ ุงูุชูููุฉ ุงููุงููุฉ**
   - โ ุชูุฏูุฑ ุงูุชูููุฉ ุจูุงุกู ุนูู ุนุฏุฏ ุงูุชูููุงุช
   - ุงูููู: [evaluator.ts:19-26](evaluator.ts#L19-L26)
   - ุงููุธููุฉ: `estimateCost()`

6. **ุจูุงุก ููุงููุณ ุฏูุงููุฉ** (ุฌุฒุฆูุงู - ุจุฏุงุฆู)
   - โ ุชุดุงุจู Cosine Similarity (ุจุณูุท ุฌุฏุงู)
   - ุงูููู: [evaluator.ts:28-73](evaluator.ts#L28-L73)
   - ุงููุธููุฉ: `calculateSimilarity()`
   - **ููุงุญุธุฉ**: ูุณุชุฎุฏู word frequency vectors ูููุณ embeddings ุญููููุฉ

7. **ูุธุงู ุงูููุงุท ุงูุฅุฌูุงูู**
   - โ ุฏูุฌ ุงูููุงููุณ ูู score ููุญุฏ (similarity 70% + cost 30%)
   - ุงูููู: [evaluator.ts:83-104](evaluator.ts#L83-L104)
   - ุงููุธููุฉ: `calculateScore()`

#### โ ุบูุฑ ููุฌุฒ:

- โ ููุงุณ `latency` (ุฒูู ุงูุงุณุชุฌุงุจุฉ)
- โ ููุงุณ ุทูู ุงูุฅุฎุฑุงุฌ ุงููุนูู
- โ ุฏูุฌ `ROUGE/BLEU` ูููุฎุฑุฌุงุช ุงููุฑุฌุนูุฉ
- โ ุจูุงุก ูุธุงู ูุดู ุงููููุณุฉ
- โ ุจูุงุก ูุญุต factuality ุนุจุฑ `RAG`
- โ ุฅุนุฏุงุฏ ูุธุงู `human feedback score`
- โ ุชุทููุฑ ููุงููุณ ูุฎุตุตุฉ ููููุฏ
- โ ุชุทููุฑ ููุงููุณ ูุฎุตุตุฉ ููุชุณููู/ุงููุญุชูู

---

### ุงูุฑูู 3: ุฎุฑูุทุฉ ุงูุทุฑูู - ุงููุฑุญูุฉ 1 (MVP)

#### โ ุงูููุฌุฒ:

8. **ุชุทููุฑ UI ุชุนุฑุถ ุงูุชุฑุงุญุงุช ูุน score**
   - โ ูุงุฌูุฉ React ุจุณูุทุฉ ุชุนุฑุถ 3 ุงูุชุฑุงุญุงุช
   - ุงูููู: [prompt-engineer.tsx](prompt-engineer.tsx)
   - ุงูููููุงุช:
     - ุนุฑุถ ุงูุชุฑุชูุจ ูุงูููุน (#1 ยท paraphrase)
     - ุนุฑุถ Score, Tokens, Cost
     - ุฒุฑ Copy ููู ุงูุชุฑุงุญ
     - ุฑุณุงุฆู ุงูุชุญููู ูุงูุฃุฎุทุงุก

#### โ ุบูุฑ ููุฌุฒ:

- โ ุฅุนุฏุงุฏ ูุฌููุนุฉ ูุฑุฌุนูุฉ ุตุบูุฑุฉ ููุงุฎุชุจุงุฑ
- โ ุงุฎุชุจุงุฑ ูุชูููู MVP ุจุดูู ุดุงูู
- โ ุฌูุน ุจูุงูุงุช ุฃุฏุงุก ุญููููุฉ

---

## โ ุงูููุงู ุงููุงููุฉ ุบูุฑ ุงูููุฌุฒุฉ

### ุงูุฑูู 1: ุงูุฑุคูุฉ ูุงููุฏู
- โ ุชุญุฏูุฏ ูุนุงููุฑ ุงูุชูุงุฒู ุจูู ุงูุฏูุฉ/ุงูุฌูุฏุฉ ูุงูุชูููุฉ ูุงูุฒูู ูุงูููุซูููุฉ
- โ ุชุตููู ุฃููุงุน ุงูุจุฑููุจุชุงุช ุงููุณุชูุฏูุฉ (ููุฏ vs ูุญุชูู/ุชุณููู)

### ุงูุฑูู 2.3: ููุญุณูู ุงูุจุญุซ/ุงูุชุญุณูู (Optimizer)
- โ ุชูููุฐ `Hill-climbing`
- โ ุชูููุฐ `Genetic / Population-based`
- โ ุชูููุฐ `Bayesian optimization`
- โ ุชูููุฐ `Bandits / MCTS`
- โ ุชูููุฐ `RL (PPO-like)`
- โ ุจูุงุก ูุธุงู Hybrid

### ุงูุฑูู 2.4: ุจูุฆุฉ ุงูุงุฎุชุจุงุฑ (Sandbox/Evaluator)
- โ ุจูุงุก ูุธุงู ุชุดุบูู ูุชูุงุฒู ุนูู `test-suite`
- โ ุฅุนุฏุงุฏ Datasets ูุฑุฌุนูุฉ
- โ ุจูุงุก ูุธุงู `lineage` ููู ุชุนุฏูู

### ุงูุฑูู 2.5: ุญููุฉ ุฅูุณุงููุฉ (Human-in-the-loop)
- โ ุจูุงุก ูุธุงู ุงุฎุชูุงุฑ ุนููุงุช ูููุฑุงุฌุนุฉ ุงูุจุดุฑูุฉ
- โ ุชุทููุฑ ูุงุฌูุฉ ููููุงููุฉ/ุงูุฑูุถ

### ุงูุฑูู 2.6: ุงูุญูููุฉ ูุงูุณูุงูุฉ
- โ ุชุทููุฑ ูููุฏ ุฃูุงู
- โ ุจูุงุก ูุธุงู `rollback/preview`

### ุงููุฑุญูุฉ 2: ุชุญุณูู ูุงุฆู ุนูู ุงูุณูุงู
- โ ุฌููุน ุงูููุงู (12 ูููุฉ)

### ุงููุฑุญูุฉ 3: Reward Model + RL
- โ ุฌููุน ุงูููุงู (10 ููุงู)

### ุงููุฑุญูุฉ 4: ููุชุฌ ูุคุณุณู
- โ ุฌููุน ุงูููุงู (8 ููุงู)

### ุงูุฑูู 4: ุงูุจูุงูุงุช ูุงูุชุนููู
- โ ุฌููุน ุงูููุงู (3 ููุงู)

### ุงูุฑูู 5: ุงููุฎุงุทุฑ ูุงูุชูุงููู
- โ ุฌููุน ุงูููุงู (4 ููุงู)

### ุงูุฑูู 6: ูุคุดุฑุงุช ุงููุฌุงุญ (KPIs)
- โ ุฌููุน ุงูููุงู (4 ููุงู)

### ุงูุฑูู 7: ุงูุชูููุงุช ูุงูุฃุฏูุงุช
- โ ุฌููุน ุงูููุงู (10 ููุงู)

---

## ๐ฏ ุชุญููู ุงููุฌูุงุช

### ููุงุท ุงูููุฉ ุงูุญุงููุฉ:
1. โ ูุธุงู mutation operators ุฃุณุงุณู ูุนูู
2. โ ูุธุงู ุชูููู heuristic ุจุณูุท
3. โ ูุงุฌูุฉ ูุณุชุฎุฏู ุนูููุฉ ููุงุถุญุฉ
4. โ ุจููุฉ ููุฏ ูุธููุฉ ูููุธูุฉ (TypeScript + React)

### ููุงุท ุงูุถุนู ุงูุญุงููุฉ:
1. โ๏ธ Mutation operators ุจุณูุทุฉ ุฌุฏุงู (3 ุฃููุงุน ููุท)
2. โ๏ธ Similarity calculation ุจุฏุงุฆู (word frequency ุจุฏูุงู ูู embeddings)
3. โ๏ธ ูุง ููุฌุฏ test suite ุฃู datasets ูุฑุฌุนูุฉ
4. โ๏ธ ูุง ููุฌุฏ ูุธุงู optimization (ูู ุงููุฎุฑุฌุงุช ุนุดูุงุฆูุฉ)
5. โ๏ธ ูุง ููุฌุฏ human feedback loop
6. โ๏ธ ูุง ููุฌุฏ ูุดู ูููููุณุฉ ุฃู factuality checking
7. โ๏ธ ูุง ููุฌุฏ ูุธุงู caching ุฃู batching

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ ุงูููุตู ุจูุง

### ุงูุฃููููุฉ ุงูุนุงููุฉ (ูุฅููุงู MVP):

1. **ุชุญุณูู Similarity Calculation**
   - ุงุณุชุจุฏุงู word frequency ุจู embeddings ุญููููุฉ (OpenAI embeddings ุฃู sentence-transformers)
   - ุงูุชุฃุซูุฑ: ุชุญุณูู ุฌูุฏุฉ ุงูุชูููู ุจุดูู ูุจูุฑ

2. **ุฅุถุงูุฉ Test Suite**
   - ุฅุนุฏุงุฏ 10-20 prompt examples ูุน ูุฎุฑุฌุงุช ูุฑุฌุนูุฉ
   - ุงูุชุฃุซูุฑ: ุงููุฏุฑุฉ ุนูู ููุงุณ ุงูุฃุฏุงุก ุงููุนูู

3. **ุชูุณูุน Mutation Operators**
   - ุฅุถุงูุฉ `expand` operator
   - ุฅุถุงูุฉ `role-based` operator (ุฃูุช ูููุฏุณ/ูุณูู/ุฎุจูุฑ...)
   - ุฅุถุงูุฉ `example-based` operator (ุฅุถุงูุฉ ุฃูุซูุฉ)
   - ุงูุชุฃุซูุฑ: ุชููุน ุฃูุจุฑ ูู ุงูุงูุชุฑุงุญุงุช

4. **ุฅุถุงูุฉ ููุงููุณ ุฅุถุงููุฉ**
   - ููุงุณ ุทูู ุงูุฅุฎุฑุงุฌ ุงููุนูู (ุนุจุฑ ุงุณุชุฏุนุงุก API)
   - ููุงุณ latency
   - ุงูุชุฃุซูุฑ: ุชูููู ุฃูุซุฑ ุดูููุงู

### ุงูุฃููููุฉ ุงููุชูุณุทุฉ (ูููุฑุญูุฉ 2):

5. **ุจูุงุก Population Search**
   - ุชูููุฏ 10-20 variation
   - ุงุฎุชูุงุฑ ุฃูุถู 3 ุจูุงุกู ุนูู ุงูุชูููู

6. **ุฅุถุงูุฉ Human Feedback UI**
   - ุฒุฑ "๐ Good" ู "๐ Bad" ููู ุงูุชุฑุงุญ
   - ุชุฎุฒูู ุงูู feedback ูู database

7. **ุจูุงุก Sandbox Runner**
   - ุชุดุบูู ูู variation ุนูู test cases
   - ุญุณุงุจ ุงููุชุงุฆุฌ ุงููุนููุฉ

### ุงูุฃููููุฉ ุงูููุฎูุถุฉ (ูููุฑุญูุฉ 3+):

8. **Reward Model Training**
9. **RL Integration**
10. **Multi-objective Optimization**

---

## ๐ ุฅุญุตุงุฆูุงุช ุงูุชูููุฐ

### ุญุณุจ ุงููุฑุญูุฉ:

| ุงููุฑุญูุฉ | ุงูููุงู ุงูุฅุฌูุงููุฉ | ุงูููุฌุฒ | ุงููุชุจูู | ุงููุณุจุฉ |
|---------|------------------|--------|---------|--------|
| **ุงููุฑุญูุฉ 1 (MVP)** | ~25 | 8 | 17 | 32% |
| **ุงููุฑุญูุฉ 2** | ~30 | 0 | 30 | 0% |
| **ุงููุฑุญูุฉ 3** | ~35 | 0 | 35 | 0% |
| **ุงููุฑุญูุฉ 4** | ~30 | 0 | 30 | 0% |

### ุญุณุจ ุงููููู:

| ุงููููู | ุงูููุงู ุงูุฅุฌูุงููุฉ | ุงูููุฌุฒ | ุงููุณุจุฉ |
|--------|------------------|--------|--------|
| **Mutation Generator** | 7 | 3 | 43% |
| **Scoring Model** | 8 | 4 | 50% |
| **Optimizer** | 6 | 0 | 0% |
| **Sandbox** | 3 | 0 | 0% |
| **Human Loop** | 2 | 0 | 0% |
| **Safety** | 2 | 0 | 0% |
| **UI** | 1 | 1 | 100% |
| **ุงูุจููุฉ ุงูุชุญุชูุฉ** | 10 | 0 | 0% |

---

## ๐ ุงูุชูููู ุงูููุงุฆู

**ุงูุญุงูุฉ ุงูุญุงููุฉ**: ุงููุดุฑูุน ูู ูุฑุญูุฉ **Proof of Concept** ุฃูุซุฑ ูู MVP ูุงูู.

**ูุง ูุนูู**:
- โ ุงููุธุงู ูุงุฏุฑ ุนูู ุชูููุฏ 3 variations ุจุณูุทุฉ
- โ ุงููุธุงู ูุงุฏุฑ ุนูู ุชูููููุง ุจููุงููุณ ุฃุณุงุณูุฉ
- โ ุงููุงุฌูุฉ ุชุนุฑุถ ุงููุชุงุฆุฌ ุจุดูู ูุงุถุญ

**ูุง ูููุต ูู MVP ุญูููู**:
- โ Test suite ูุนูู ูููุงุณ ุงูุฃุฏุงุก
- โ Embeddings ุญููููุฉ ููุชุดุงุจู ุงูุฏูุงูู
- โ Mutation operators ูุชููุนุฉ
- โ Optimization algorithm (ุญุงููุงู ูู ุงูุงูุชุฑุงุญุงุช ุนุดูุงุฆูุฉ)

**ุงูุชูุตูุฉ**: ุงูุชุฑููุฒ ุนูู ุฅููุงู ุงููุฑุญูุฉ 1 (MVP) ูุจู ุงูุงูุชูุงู ูููุฑุงุญู ุงููุชูุฏูุฉ.

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

1. **ุฌูุฏุฉ ุงูููุฏ**: ุงูููุฏ ุงูุญุงูู ูุธูู ูููุธู ุจุดูู ุฌูุฏ
2. **ุงูุชูุซูู**: ููุชุงุฒ - ุชูุฌุฏ 4 ูููุงุช ุชูุซูููุฉ ุดุงููุฉ
3. **ุงูููุชุจุงุช**: ุจุณูุทุฉ ูููุงุณุจุฉ ูููุฑุญูุฉ ุงูุญุงููุฉ
4. **Git History**: commits ูุงุถุญุฉ ูููุธูุฉ

---

**ุขุฎุฑ ุชุญุฏูุซ**: 2025-12-14
**ุงููุฑุงุฌุน**: [TODO.md](TODO.md), [PLAN.md](PLAN.md), [mutations.ts](mutations.ts), [evaluator.ts](evaluator.ts), [prompt-engineer.tsx](prompt-engineer.tsx)
